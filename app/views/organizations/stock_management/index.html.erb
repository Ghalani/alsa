<div id="stock-management">
  <%= render "static_pages/nav" %>
  <div class="green-bg pad1 padb3">
    Stock management
  </div>
  <div class="">
    <div class="ui grid">
      <div class="six wide column">
        <div class="card raise-1 w100p marg-tb">
          <div class="card-top">
            <h4>Stock types
              <span class="right-icon-grey" @click="toggleNewStockTypeModal()" ><i class="plus icon"></i></span>
            </h4>
            <hr>
          </div>   
          <div>
            <div v-if="stockTypes.length < 1">
              No Stock types on your system
            </div>            
            <div v-if="stockTypes.length > 0">
              <div v-for="st in stockTypes">
                {{st.name}} {{st.unit}}
              </div>
            </div>
          </div>
        </div>
        <div class="card raise-1 w100p marg-tb">
          <div class="card-top">
            <h4>Stock items 
              <span class="right-icon-grey" @click="toggleNewStockItemModal()" ><i class="plus icon"></i></span>
            </h4>
            <hr>
          </div> 
          <div>
            <div v-if="stockItems.length < 1">
              No Stock items on your system
            </div>            
            <div v-if="stockItems.length > 0">
              <div v-for="si in stockItems">
                {{si.name}} {{si.unit}}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="ten wide column">
        <div class="card raise-1 w100p marg-tb">
          <div class="card-top">
            <h4>
              <a id="stored-item" class="item pad1 menu-item">Stored</a>
              <a id="incoming-item" class="active item pad1 menu-item">Incoming</a>
              <a id="orders-item" class="item pad1 menu-item">Orders</a>
            </h4>
            <hr>
          </div> 
          <div>
            <div id="stored-item-panel" class="ui active tab">
              <div class="ui grid">
                <div class="ten wide column h400-min grey-border-right">
                  <div class="fab fab-br raise-3"><i class="ui add icon"></i></div>
                  Stored items
                </div>
                <div class="six wide column">
                  <h4>Storages (warehouse)
                    <span @click="toggleNewStorageModal()" class="right-icon-grey"><i class="plus icon"></i></span>
                  </h4>
                  <hr>
                  <div>
                    <div v-if="storages.length < 1">
                      No Storage (warehouse) on your system
                    </div>            
                    <div v-if="storages.length > 0">
                      <div v-for="st in storages">
                        {{st.name}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="incoming-item-panel" class="ui tab">
              <div class="ui grid">
                <div class="ten wide column h400-min grey-border-right">
                  <div id="new-incoming-stock-item-button" class="fab fab-br raise-3" @click="toggleNewIncomingStockItem()"><i class="ui add icon"></i></div>
                  <div id="new-incoming-stock-item" hidden>
                    <span class="right-icon-grey" @click="toggleNewIncomingStockItem()"><i class="ui remove icon"></i></span>
                    <div class="form-group">
                      <label>Stock type</label><br>
                      <div v-if="stockItems.length < 1" class="ui button accent-bg" @click="toggleNewStockItemModal()">
                        Create new Stock Item
                      </div>
                      <select v-if="stockItems.length > 0" v-model="newIncomingStock.stock_item_id" class="classic">
                        <option v-for="stockItem in stockItems" v-bind:value="stockItem.id">{{stockItem.name}}</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label>Source (From who?)</label><br>
                      <div v-if="stockSources.length < 1" class="ui button accent-bg" @click="toggleNewStockSourceModal()">
                        Create new Stock source
                      </div>
                      <select v-if="stockSources.length > 0" v-model="newIncomingStock.stock_item_id" class="classic">
                        <option v-for="stockSource in stockSources" v-bind:value="stockSource.id">{{stockSource.name}}</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label>Quantity</label><br>
                      <input class="classic" type="number" v-model="newIncomingStock.quantity">
                    </div>
                    <div class="form-group">
                      <label>Date</label><br>
                      <input class="classic date" type="datetime" v-model="newIncomingStock.date" placeholder="when did it arrive?">
                    </div>
                  </div>
                  <div id="incoming-stock-item-list">
                    Incoming stock item List
                  </div>
                </div>
                <div class="six wide column">
                  <h4>Sources (Suppliers)
                    <span @click="toggleNewStockSourceModal()" class="right-icon-grey"><i class="plus icon"></i></span>
                  </h4>
                  <hr>
                  <div>
                    <div v-if="stockSources.length < 1">
                      No Supplier of stock on your system
                    </div>            
                    <div v-if="stockSources.length > 0">
                      <div v-for="sp in stockSources">
                        {{sp.name}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="orders-item-panel" class="ui tab">
              orders
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="new-stock-type-modal" class="ui small modal">
    <div class="content">
      <h4>New stock type</h4><hr>
      <div class="form-group">
        <label>Name</label><br>
        <input class="classic" type="text" v-model="newStockType.name" placeholder="fertilizer, aerosol, liquid, tool, machine, etc...">
      </div>
      <div class="form-group">
        <label>Unit of measurement </label><br>
        <input class="classic" type="text" v-model="newStockType.unit" placeholder="(e.g. Kilogram, bags, packs, bottles etc...">
      </div>
    </div>
    <div class="actions">
      <div class="ui button accent-bg" @click="addStockType()">Create</div>
      <div class="ui cancel button">Cancel</div>
    </div>
  </div>
  <div id="new-stock-item-modal" class="ui small modal">
    <div class="content">
      <h4>New stock item</h4>
      <div class="form-group">
        <label>Stock type</label><br>
        <div v-if="stockTypes.length < 1" class="ui button accent-bg" @click="toggleNewStockTypeModal()">
          Create new Stock type
        </div>
        <select v-if="stockTypes.length > 0" v-model="newStockItem.stock_type_id" class="classic">
          <option v-for="stockType in stockTypes" v-bind:value="stockType.id">{{stockType.name}}</option>
        </select>
      </div>
      <div class="form-group">
        <label>Name</label><br>
        <input class="classic" type="text" v-model="newStockItem.name" placeholder="Nordox, 24 pack Coca cola, etc.">
      </div>
      <div class="form-group">
        <label>Cost</label><br>
        <input class="classic" type="number" v-model="newStockItem.cost" placeholder="Cost per unit">
      </div>
      <div class="form-group">
        <label>Minimum quantity</label><br>
        <input class="classic" type="number" v-model="newStockItem.minimum_quantity" placeholder="Minimum quantity to alert for refill">
      </div>
    </div>
    <div class="actions">
      <div class="ui button accent-bg" @click="addStockItem()">Create</div>
      <div class="ui cancel button">Cancel</div>
    </div>
  </div>
  <div id="new-storage-modal" class="ui small modal">
    <div class="content">
      <h4>New storage</h4>
      <div class="form-group">
        <label>Name</label><br>
        <input class="classic" type="text" v-model="newStorage.name" placeholder="Warehouse 1, Room x2, etc.">
      </div>
      <div class="form-group">
        <label>location</label><br>
        <input class="classic" type="number" v-model="newStorage.location">
      </div>
    </div>
    <div class="actions">
      <div class="ui button accent-bg" @click="addStorage()">Create</div>
      <div class="ui cancel button">Cancel</div>
    </div>
  </div>
  <div id="new-stock-source-modal" class="ui small modal">
    <div class="content">
      <h4>New storage</h4>
      <div class="form-group">
        <label>Name</label><br>
        <input class="classic" type="text" v-model="newStockSource.name" placeholder="eg. Fertilizer depot 1">
      </div>
      <div class="form-group">
        <label>Email</label><br>
        <input class="classic" type="email" v-model="newStockSource.email" placeholder="eg. name@example.com">
      </div>
      <div class="form-group">
        <label>phone</label><br>
        <input class="classic" type="tel" v-model="newStockSource.phone" placeholder="eg. 02013235648">
      </div>
      <div class="form-group">
        <label>Address</label><br>
        <input class="classic" type="text" v-model="newStockSource.address" placeholder="1st street, city-name">
      </div>
    </div>
    <div class="actions">
      <div class="ui button accent-bg" @click="addStockSource()">Create</div>
      <div class="ui cancel button">Cancel</div>
    </div>
  </div>
</div>
<%= render 'organizations/stock_management/scripts' %>